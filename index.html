<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Routine Tracker | Nishu's Dashboard</title>
    <meta name="description" content="Track your daily habits with beautiful visualizations and streak tracking">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Outfit:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="style.css">
</head>

<body class="dark-mode">
    <!-- Theme Toggle -->
    <button id="themeToggle" class="theme-toggle" onclick="toggleTheme()">
        <span class="sun-icon">â˜€ï¸</span>
        <span class="moon-icon">ğŸŒ™</span>
    </button>

    <!-- Main Container -->
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-icon">ğŸ¯</div>
                    <div class="logo-text">
                        <h1>Daily Routine Tracker</h1>
                        <p class="subtitle">January 2026 â€¢ Build Better Habits</p>
                    </div>
                </div>
            </div>
        </header>



        <!-- Stats Cards -->
        <section class="stats-section">
            <div class="stats-grid">
                <div class="stat-card stat-progress">
                    <div class="stat-icon">ğŸ“ˆ</div>
                    <div class="stat-content">
                        <span class="stat-value" id="overallProgress">0%</span>
                        <span class="stat-label">Overall Progress</span>
                    </div>
                    <div class="stat-bar">
                        <div class="stat-bar-fill" id="progressBar" style="width: 0%"></div>
                    </div>
                </div>

                <div class="stat-card stat-streak">
                    <div class="stat-icon">ğŸ”¥</div>
                    <div class="stat-content">
                        <span class="stat-value" id="bestStreak">0</span>
                        <span class="stat-label">Best Streak</span>
                    </div>
                </div>

                <div class="stat-card stat-completed">
                    <div class="stat-icon">âœ“</div>
                    <div class="stat-content">
                        <span class="stat-value" id="totalCompleted">0</span>
                        <span class="stat-label">Completed</span>
                    </div>
                </div>

                <div class="stat-card stat-missed">
                    <div class="stat-icon">âœ—</div>
                    <div class="stat-content">
                        <span class="stat-value" id="totalMissed">0</span>
                        <span class="stat-label">Missed</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- View Toggle -->
        <section class="view-toggle-section">
            <div class="view-toggle">
                <button class="view-btn active" data-view="weekly" onclick="setView('weekly')">
                    <span class="view-icon">ğŸ“…</span>
                    Weekly View
                </button>
                <button class="view-btn" data-view="monthly" onclick="setView('monthly')">
                    <span class="view-icon">ğŸ—“ï¸</span>
                    Monthly View
                </button>
            </div>

            <!-- Week Selector (shown in weekly view) -->
            <div class="week-selector" id="weekSelector">
                <button class="week-btn" onclick="selectWeek(1)">Week 1</button>
                <button class="week-btn active" onclick="selectWeek(2)">Week 2</button>
                <button class="week-btn" onclick="selectWeek(3)">Week 3</button>
                <button class="week-btn" onclick="selectWeek(4)">Week 4</button>
            </div>
        </section>

        <!-- Habit Tracker Table -->
        <section class="tracker-section">
            <div class="tracker-header">
                <h2>ğŸ“‹ Habit Tracker</h2>
                <button class="add-habit-btn" onclick="openAddHabitModal()">
                    <span>+</span> Add Habit
                </button>
            </div>

            <div class="tracker-table-container">
                <table class="tracker-table" id="habitTable">
                    <thead>
                        <tr id="tableHeaders">
                            <th class="habit-col">Habit</th>
                            <!-- Date headers will be inserted here -->
                            <th class="progress-col">Progress</th>
                            <th class="streak-col">Streak ğŸ”¥</th>
                            <th class="actions-col">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="habitTableBody">
                        <!-- Habit rows will be inserted here -->
                    </tbody>
                </table>
            </div>

            <div class="legend">
                <div class="legend-item">
                    <span class="legend-icon completed">âœ“</span>
                    <span>Completed</span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon missed">âœ—</span>
                    <span>Missed</span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon pending">â—‹</span>
                    <span>Not marked</span>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-section">
            <div class="charts-grid">
                <div class="chart-card">
                    <h3>ğŸ“Š Progress by Habit</h3>
                    <div class="chart-container">
                        <canvas id="habitProgressChart"></canvas>
                    </div>
                </div>

                <div class="chart-card">
                    <h3>ğŸ“ˆ Weekly Trend</h3>
                    <div class="chart-container">
                        <canvas id="weeklyTrendChart"></canvas>
                    </div>
                </div>

                <div class="chart-card chart-wide">
                    <h3>ğŸ¯ Daily Completion Rate</h3>
                    <div class="chart-container">
                        <canvas id="dailyCompletionChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>Made with ğŸ’œ for Nishu | Â© 2026 Infinite Club</p>
        </footer>
    </div>

    <!-- Add Habit Modal -->
    <div class="modal" id="addHabitModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Habit</h3>
                <button class="modal-close" onclick="closeAddHabitModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Habit Name</label>
                    <input type="text" id="newHabitName" placeholder="e.g., Morning Walk">
                </div>
                <div class="form-group">
                    <label>Choose Emoji</label>
                    <div class="emoji-picker">
                        <button class="emoji-btn selected" data-emoji="ğŸ“Œ">ğŸ“Œ</button>
                        <button class="emoji-btn" data-emoji="ğŸ’ª">ğŸ’ª</button>
                        <button class="emoji-btn" data-emoji="ğŸ¯">ğŸ¯</button>
                        <button class="emoji-btn" data-emoji="ğŸ“–">ğŸ“–</button>
                        <button class="emoji-btn" data-emoji="ğŸ§ ">ğŸ§ </button>
                        <button class="emoji-btn" data-emoji="ğŸ¨">ğŸ¨</button>
                        <button class="emoji-btn" data-emoji="ğŸµ">ğŸµ</button>
                        <button class="emoji-btn" data-emoji="ğŸ ">ğŸ </button>
                        <button class="emoji-btn" data-emoji="ğŸ’»">ğŸ’»</button>
                        <button class="emoji-btn" data-emoji="ğŸ“">ğŸ“</button>
                        <button class="emoji-btn" data-emoji="ğŸŒŸ">ğŸŒŸ</button>
                        <button class="emoji-btn" data-emoji="âš¡">âš¡</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeAddHabitModal()">Cancel</button>
                <button class="btn btn-primary" onclick="addNewHabit()">Add Habit</button>
            </div>
        </div>
    </div>

    <!-- Google Sheets Setup Modal -->
    <div class="modal" id="sheetsSetupModal">
        <div class="modal-content modal-wide">
            <div class="modal-header">
                <h3>ğŸ“Š Connect Google Sheets</h3>
                <button class="modal-close" onclick="closeSheetsSetupModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="setup-steps">
                    <div class="setup-step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <strong>Create a new Google Sheet</strong>
                            <p>Go to <a href="https://sheets.google.com" target="_blank">sheets.google.com</a> and
                                create a new blank spreadsheet</p>
                        </div>
                    </div>
                    <div class="setup-step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <strong>Share with Service Account</strong>
                            <p>Click "Share" and add this email as Editor:</p>
                            <div class="copy-box">
                                <code id="serviceEmail">lead-agent@infinite-club-project.iam.gserviceaccount.com</code>
                                <button class="copy-btn" onclick="copyServiceEmail()">ğŸ“‹ Copy</button>
                            </div>
                        </div>
                    </div>
                    <div class="setup-step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <strong>Copy Sheet ID from URL</strong>
                            <p>The Sheet ID is in the URL between /d/ and /edit</p>
                            <p class="example-url">
                                https://docs.google.com/spreadsheets/d/<strong>SHEET_ID_HERE</strong>/edit</p>
                        </div>
                    </div>
                    <div class="setup-step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <strong>Paste Sheet ID below</strong>
                            <input type="text" id="sheetIdInput"
                                placeholder="e.g., 1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeSheetsSetupModal()">Cancel</button>
                <button class="btn btn-primary" onclick="connectGoogleSheets()">ğŸ”— Connect Sheet</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loader">
            <div class="loader-spinner"></div>
            <p>Loading your habits...</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>